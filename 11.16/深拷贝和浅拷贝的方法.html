<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>

</body>
<script>
    // 深拷贝的四种方法
    // 1、使用JSON.stringify()以及JSON.parse()
    var obj1 = {
        a: 1,
        b: 2,
        c: 3
    }
    var objString = JSON.stringify(obj1); //将对象转换为json字符串形式
    var obj2 = JSON.parse(objString);  //将转换而来的字符串转换为原生js对象
    obj2.a = 5;
    console.log(obj1.a);  // 1
    console.log(obj2.a); // 5
    // 通过for in实现
    function deepCopy1(obj) {
        let o = {}
        for (let key in obj) {
            o[key] = obj[key]
        }
        return o
    }

    let obj = {
        a: 1,
        b: undefined,
        c: function () { },
    }

    console.log(deepCopy1(obj))
    // 递归
    function deepClone(obj) {
        if (typeof obj !== 'object' || obj == null) {
            return obj
        }
        let result
        if (obj instanceof Array) {
            result = []
        } else {
            result = {}
        }
        for (let key in obj) {
            if (obj.hasOwnProperty(key)) {
                result[key] = deepClone(obj[key])
            }
        }
        return result
    }
    // concat（数组的深拷贝）
    let arr = [1, 2, 3, 4, 5]
    let arr1 = arr.concat()
    arr1[0] = 100
    console.log(arr);
    console.log(arr1);
    // 浅拷贝的方法
    // Object.assign
    let obj3 = {
        a: 1,
        b: 2,
        c: 3
    }
    let obj4 = Object.assign({}, obj3)
    obj4.a = 5
    console.log(obj3.a); // 1
    console.log(obj4.a); // 5
    // 扩展运算符
    let obj5 = {
        a: 1,
        b: 2,
        c: 3
    }
    let obj6 = { ...obj5 }
    obj6.a = 5
    console.log(obj5.a); // 1
    console.log(obj6.a); // 5
    //封装
    function shallowClone(obj) {
        let result = {}
        for (let key in obj) {
            result[key] = obj[key]
        }
        return result
    }
    // Array.prototype.concat
    let arr2 = [1, 2, 3, 4, 5]
    let arr3 = arr2.concat()
    arr3[0] = 100
    console.log(arr2);
    console.log(arr3);
    // Array.prototype.slice
    let arr4 = [1, 2, 3, 4, 5]
    let arr5 = arr4.slice()
    arr5[0] = 100
    console.log(arr4);
    console.log(arr5);
</script>

</html>